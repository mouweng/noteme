# 二分图匹配

## 匈牙利算法

## KM算法

## 最大费用最大流

**费用流（Cost Flow）算法**是一种在网络图中用来解决 **最小费用最大流** 或 **最大费用最大流** 问题的经典算法。它的主要目标是找到一种流量分配方式，使得：

- 在满足流量约束的前提下，最大化（或最小化）流量的总费用。
- 在流网络中分配流量，使得流量的“收益”或“代价”达到最优。

**流网络模型**

费用流问题依赖于一个流网络，流网络通常包含以下元素：

- 节点：图中的顶点，代表实体或者状态，例如：男生节点、女生节点、源点（`source`）、汇点（`sink`）？
- 连边：图中的有向边，表示从一个节点到另一个节点的关系。
  - 容量（Capacity）：该边可容纳的最大流量，例如，一个男生最多只能与一个女生匹配。
  - 费用（Cost）：单位流量通过该边的代价或收益。例如，男生和女生之间匹配的权重（如分数、收益等）。

**最大费用最大流**

在最大费用流问题中，我们的目标是：

- 最大化流量的总费用：在满足流量约束（容量约束）的前提下，找到一条流量分配方案，使得流网络中的总费用（或总收益）最大化。

**费用流在匹配场景中的应用**

问题描述：给定两组实体（例如男生和女生），以及它们之间的关联权重，目标是匹配两个群体，使得总权重最大化。

使用费用流算法，可以在满足限制条件（例如一个人只能匹配一个人）的前提下，找到匹配对，使得总分数或总收益最大化。

**如何确保匹配对数最大化**？

设置一个初始的匹配分数100分。

## 对比与总结

# KM算法 vs 最大费用最大流算法核心区别

| **维度**             | **KM算法**                                         | **最大费用最大流算法**                           |
|----------------------|---------------------------------------------------|-------------------------------------------------|
| **适用图类型**       | 仅适用于二分图                                     | 适用于任意图（包括非二分图）                     |
| **目标**             | 求二分图的最大权匹配                                | 求最大流量时的总费用最大化                       |
| **复杂度**           | \( O(n^3) \)                                       | \( O(F \cdot (m + n \log n)) \) 或更高          |
| **效率**             | 更高效，适用于二分图匹配问题                        | 相对较低，适用于更复杂的场景                     |
| **实现难度**         | 实现较简单，算法逻辑针对二分图优化                  | 实现更复杂，涉及网络流和最短路算法               |
| **局限性**           | 仅适用于完全二分图，非二分图或稀疏图需补权值        | 通用性强，可用于二分图以及更复杂的网络结构       |
| **容量限制**         | 无法处理容量限制                                    | 可灵活处理边容量限制                             |
| **通用性**           | 专用于二分图的最大权匹配问题                        | 通用性更高，适用于带权重和容量限制的任意图问题   |
| **增广路径**         | 基于增广路径调整匹配                                | 通过增广路径调整流量                             |


- **使用KM算法的场景**：
  - 问题是标准的二分图最大权匹配问题。
  - 问题规模较小（如节点数较少，但边数较多）。
  - 不涉及容量限制或其他复杂约束。

- **使用最大费用最大流的场景**：
  - 问题是更复杂的网络，例如非二分图、多对多匹配或有容量限制。
  - 需要同时考虑匹配权重和容量约束。
  - 问题规模较大或需要更通用的解决方案。