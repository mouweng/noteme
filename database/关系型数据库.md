# 关系型数据库面试题

- [DB-TUTORIAL（关系型数据库面试题）](https://dunwu.github.io/db-tutorial/sql/common/sql-interview.html#%E4%B8%80%E3%80%81%E7%B4%A2%E5%BC%95%E5%92%8C%E7%BA%A6%E6%9D%9F)

## 一、索引

> 索引是对数据库表中一或多个列的值进行排序的结构，是帮助数据库高效查询数据的数据结构。

### 索引的优缺点

- 优点：加速查询、排序、分组的速度；
- 缺点：索引需要占用额外的物理空间；写操作会更新索引导致速度减慢；太多的索引会增加查询优化器的选择时间；

### 何时使用索引

✔ 什么情况**适用**索引：

- 表经常进行 `SELECT` 操作；
- 表的数据量比较大；
- 列名经常出现在 `WHERE` 或连接（`JOIN`）条件中

❌ 什么情况**不适用**索引：

- **频繁写操作**（ `INSERT`/`UPDATE`/`DELETE` ）- 需要更新索引空间；
- **非常小的表**：直接全表扫描更高效；
- 列名不经常出现在 `WHERE` 或连接（`JOIN`）条件中 - 索引就会经常不命中，没有意义，还增加空间开销。
- 对于特大型表，建立和使用索引的代价将随之增长。可以考虑使用分区技术或 Nosql。

### 索引的类型

> 从物理存储上划分

- 聚簇索引

一般是主键上的索引(只有一个)，叶子节点存储一整行数据信息，维护代价很高。查询效率高，不需要二次查询。

- 非聚簇索引（辅助索引）

不一定是主键上的索引(可以有多个)，叶子节点只存储主键信息。需要二次查询，在非聚簇索引上检索到主键后，还要继续在聚簇索引上查找，IO次数比聚簇索引要多。

> 实现方式来划分

- B+树索引

B+树是大多数存储引擎的默认索引类型，可以用作范围查询、模糊查询、比较、排序。

- 哈希索引

哈希索引使用Hash表来作为底层结构，不可以用作范围查询、模糊查询、比较、排序，查询速度比较快O(1)，而B+树是O(logn)，在InnoDB存储引擎中“自适应哈希索引“功能，当某个值被频繁索引会在B+树索引的基础上建立一个Hash索引。

### 索引的数据结构

